---
title: 单例模式
date: 2021-07-14 19:00:00
tags: js设计模式
excerpt: 单例就是保证一个类只有一个实例，实现方法一般是先判断实例存在与否，如果存在直接返回，如果不存在就创建了再返回，这就确保了一个类只有一个实例对象。在JavaScript里，单例作为一个命名空间提供者，从全局命名空间里提供一个唯一的访问点来访问该对象。
---
### 单例模式

#### 定义

在单例模式中，一个类只能被实例化一次，即使被实例化（被new）多次，也只返回第一次的实例对象。因此该模式用两个特点：唯一性和全局可访问。

#### 应用场景

一般应用于以下场景：

- 全局的配置
- 全局维护一个状态（vuex，redux）等

#### 实现一个单例模式

```javascript
class Programmer {
		static getInstance() {
    		if (!Programmer.instance) {
        		Programmer.instance = new Programmer();
        }
      	return Programmer.instance;
    }
  	coding() {
    		....
    }
}
const A = Programmer.getInstance();
const B = Programmer.getInstance();
A === B // true;
```

通过instance来判断Programmer是否曾被实例化过，如果被实例化了就返回之前的对象，反之，则实例化一个新对象，并用instance记录下来。

通过必包实现：

```javascript
class ProgrammerBase {}
const Programmer = (function() {
		let instance = null;
  	return function() {
    		if (!instance) {
          	instance = new ProgrammerBase();
        }
      	return instance;
    }
})();
const A = new Programmer();
const B = new Programmer();
A === B // true
```





