---
title: closure
date: 2019-11-19 17:42:47
tags: js
---
### closure 闭包
在JS中，变量的作用域属于函数作用域，在函数执行后作用域就会被清理、内存也随之回收，但是由于闭包是建立在一个函数内部的子函数，由于其可访问上级作用域的原因，即使上级函数执行完，作用域也不会随之销毁，这时的子函数——也就是闭包，便拥有了访问上级作用域中的变量的权限，即使上级函数执行完后作用域内的值也不会被销毁。

从以下几句话中来明确概念：

#### 变量作用域：
全局变量 在 全局范围内可用，存在于全局作用域中，在js任何代码中可见
局部变量 只 存在 函数体内，在局部作用域中使用
函数作用域 在函数体内的所有变量可以使用

### 作用域链：
定义一个函数时， 会保存一个作用域链；
对于嵌套函数来说，每内调用一次外部函数，都会创建一个新的作用域链；
每次外部函数的调用，内部的代码相同，但其作用域链不同

### js垃圾回收机制：
js具有自动垃圾回收机制，会定期把不再使用的变量销毁，释放其占用的内存；
(只会销毁局部变量，全局变量的生命周期只有在页面或浏览器关闭时才会结束)